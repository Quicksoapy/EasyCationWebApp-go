<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.6.1.js" 
  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" 
  crossorigin="anonymous"></script>
</head>
<body onload='document.formpass.text.focus()'>
  <div class="background">
    <div class="center" >
      <div id="form">
        <div class="col-md-6 login-form" id="loginbtn" >   
          <h2 class="logintext">Sign Up</h2>
          <div class="inputsize">
            <div class="form-group">
              <input placeholder="Username" id="border" type="text" class="form-control" value="" id="username" required data-validation-required-message="Please enter your name." autocomplete="off">
              <p class="help-block text-danger"></p>
            </div>
            <div class="form-group">
              <input placeholder="first name" id="border" type="text" class="form-control" value="" id="name" required data-validation-required-message="Please enter your name." autocomplete="off">
              <p class="help-block text-danger"></p>
              
            </div>
            <div class="form-group">   
                <input onkeydown="Check()" onkeyup="Check()" type="text" class="form-control" placeholder="Email" value="" id="email" required data-validation-required-message="Please enter your email address." autocomplete="off">
                <p class="help-block text-danger"></p>
            </div>
            <label class="invalidm" id="labell" > Enter a valid Email!</label>
            <div class="form-group">
              <form name="formpass" action="#">
                <input  placeholder="password" id="password" type="password" name="passwordtext" class="form-control" value="" id="password" required data-validation-required-message="Please enter your password" autocomplete="off" minlength="8" required>
                <p class="help-block text-danger"></p>
              </form>
            </div>
          </div>
          <div>
            <a href="index.html">
            <button class="exit">X</button>
            </a>
          </div>
          <div>
            <a href="login.html">
            <button class="back">‚Üê</button>
            </a>
          </div>
              <div class="mrgn-20-top">
                <button disabled="true" id="button" type="submit" class="btn btn-larger btn-block" onclick="CheckPassword(document.formpass.passwordtext)" >
                Sign up
                </button>
              </div>
        </div>
      </div> 
    </div>
  </div>
  


  <nav class="navbar" id="navbar">
    <a href="index.html">
    <img class="logo" src="https://media.discordapp.net/attachments/1037658643539173476/1039479244226580520/EasyCation_LONG_PNG_VERSION.png">
    </a>
    <ul class="nav-links">
      <div class="menu">
        <li><a href="index.html">Home</a></li>
        
        <li><a class="current" href="/">Leerstof</a>
          <ul class="dropdown">
            <li><a href="/">Wiskunde</a></li>
            <li><a href="/">Taal</a></li>
            <li><a href="/">Geografie</a></li>
            <li><a href="/">Landbouw</a></li>
          </ul>
        </li>
      </div>
    </ul>
  </nav> 
  <h1 style="color: white;">INTRODUCTION PAGE</h1>
  <script>
      const emaill = document.querySelector("#email");
      const buttonn = document.querySelector("#button");
      const labell = document.querySelector("#labell");

      let regExp = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;

      function Check() {
        
          if(emaill.value.match(regExp)) {
              emaill.style.borderColor  = "green";
              buttonn.disabled = false;
              labell.style.display = 'none';
          }else {
              emaill.style.borderColor  = "red";
              buttonn.disabled = true;
              labell.style.display = 'flex';
              
          } 
      }
      
      function CheckPassword(inputtxt) 
      { 
      var passw=  /^(?=.*[a-z])(?=.*[A-Z]).{8,20}$/;
      if(inputtxt.value.match(passw)) 
      { 
        onsignup();
        return true;
      }
      else
      { 
        alert('Please enter a password with atleast 8 characters and a capital letter. ')
        return false;
      }
      }
    function onsignup(){
      var username =$('#username').val();
      var name =$('#name').val();
      var email = $('#email').val();
      var password = $('#password').val();

      jsonObject={
        "Username":"",
        "Name":"",
        "Email":"",
        "Password":""
      }
      jsonObject.Username=username;
      jsonObject.Name=name;
      jsonObject.Email=email;
      jsonObject.Password=password;

      var str=JSON.stringify(jsonObject);
      postData('backend/api/register', str)
    }

      // Example POST method implementation:
      async function postData(url = '', data = {}) {
        console.log("rowan_battles")
        // Default options are marked with *
        const response = await fetch(url, {
          method: 'POST', // *GET, POST, PUT, DELETE, etc.
          mode: 'cors', // no-cors, *cors, same-origin
          cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
          credentials: 'same-origin', // include, *same-origin, omit
          headers: {
            'Content-Type': 'application/json'
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          redirect: 'follow', // manual, *follow, error
          referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
          body: JSON.stringify(data) // body data type must match "Content-Type" header
        });
        console.log(data)
        return response.json(); // parses JSON response into native JavaScript objects
      }
  </script>
</body>
</html>
